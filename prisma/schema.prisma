generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userId            BigInt      @id @unique
  name              String      @default("")
  username          String      @default("")
  amountEnergy      Int         @default(3)
  lastGameTimestamp String?     @db.VarChar(32)
  gameTime          Int         @default(60)
  allScore          Int         @default(0)
  currentScore      Int         @default(0)
  leadboardScore    Int         @default(0)
  skin              String      @default("default")
  amountNft         Int         @default(0)
  userTasks         UserTask[]
  inviteCode        String      @unique @db.VarChar(32)
  refCode           String?     @db.VarChar(32)
  userBoosts        UserBoost[]
  userGames         UserGame[]
}

model UserTask {
  id        Int     @id @default(autoincrement())
  user      User?   @relation(fields: [userId], references: [userId])
  userId    BigInt?
  task      Task?   @relation(fields: [taskId], references: [id])
  taskId    Int?
  completed Boolean @default(false)
}

model Task {
  id        Int        @id @default(autoincrement())
  title     String     @default("")
  bonus     Int        @default(0)
  link      String     @default("")
  userTasks UserTask[]
}

model UserBoost {
  id               Int     @id @default(autoincrement())
  user             User?   @relation(fields: [userId], references: [userId])
  userId           BigInt?
  boost            Boost?  @relation(fields: [boostId], references: [id])
  boostId          Int?
  level            Int     @default(0)
  availableCount   Int     @default(1)
  lastUseTimestamp String? @db.VarChar(32)
}

model Boost {
  id           Int         @id @default(autoincrement())
  title        String      @default("")
  slug         String      @unique @default("") @db.VarChar(64)
  description  String      @default("")
  improveTitle String      @default("")
  allCount     Int         @default(1)
  userBoost    UserBoost[]
  levelPrice   Int         @default(0)
  maxLevel     Int         @default(0)
  canImproved  Boolean     @default(false)
}

model UserGame {
  id        Int     @id @default(autoincrement())
  user      User?   @relation(fields: [userId], references: [userId])
  userId    BigInt?
  hash      String  @unique @db.VarChar(64)
  score     Int     @default(0)
  startTime String? @db.VarChar(32)
  endTime   String? @db.VarChar(32)
}
